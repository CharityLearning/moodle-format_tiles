define(["jquery"],function(a){"use strict";var b,c,d=a("body"),e={PAGE:"#page",TILEID:"#tile-",SECTION_ID:"#section-"},f={HEADER_OVERLAY:"header-overlay"},g={DISPLAY:"display",Z_INDEX:"z-index",HEIGHT:"height",BG_COLOUR:"background-color"},h=function(a){return!!c&&(a===!0?c.fadeIn(300):c.fadeOut(300),!0)},i=function(a,b,c,d){var e=d<0?0:255,f=d<0?d*-1:d,g=Math.round((e-a)*f)+a,h=Math.round((e-b)*f)+b,i=Math.round((e-c)*f)+c;return"rgb("+g+","+h+","+i+")"},j=function(){var a=parseInt(b.css(g.Z_INDEX));return a>0?a:0},k=function(c){b.fadeIn(300);var d=parseInt(b.css(g.Z_INDEX));d=d>0?d:0;var f=a(e.TILEID+c);if(f.css(g.Z_INDEX,d+1),h(!0),a(e.SECTION_ID+c).css(g.Z_INDEX,d+1),f.css(g.BG_COLOUR)&&"rgba"===f.css(g.BG_COLOUR).substr(0,4)){var j=f.css(g.BG_COLOUR).replace("rgba(","").replace(")","").replace(" ","").split(",");f.css(g.BG_COLOUR,i(parseInt(j[0]),parseInt(j[1]),parseInt(j[2]),.95))}},l=function(b){if("navwrap"!==b.attr("id")&&void 0!==b.height()){var c=a("<div></div>").addClass(f.HEADER_OVERLAY).attr("id",f.HEADER_OVERLAY).css(g.DISPLAY,"none");return c.insertAfter(e.PAGE).css(g.Z_INDEX,j()+3).css(g.HEIGHT,b.outerHeight()),c}return!1};return{getZIndex:function(){return j()},fadeIn:function(){"none"===b.css(g.DISPLAY)&&b.fadeIn(300)},getWindowOverlay:function(){return void 0===b&&(b=a("<div></div>").addClass("modal-backdrop fade in").hide().attr("id","window-overlay").appendTo(d)),b},fadeOut:function(){"block"===b.css(g.DISPLAY)&&(b.fadeOut(300),h(!1))},set:function(a){k(a)},getHeaderBarOverlay:function(a){return void 0===c&&(c=l(a)),c},isVisible:function(){return b.is(":visible")}}});